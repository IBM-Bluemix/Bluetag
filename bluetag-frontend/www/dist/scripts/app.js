!function e(t,o,r){function n(i,l){if(!o[i]){if(!t[i]){var c="function"==typeof require&&require;if(!l&&c)return c(i,!0);if(a)return a(i,!0);var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var u=o[i]={exports:{}};t[i][0].call(u.exports,function(e){var o=t[i][1][e];return n(o?o:e)},u,u.exports,e,t,o,r)}return o[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n}({1:[function(e,t,o){t.exports={register:"http://bluetag-register.mybluemix.net/",game:"http://bluetag-engine.mybluemix.net/",location:"ws://bluetag-location.mybluemix.net/",search:"ws://bluetag-search.mybluemix.net/",tag:"http://bluetag-tag.mybluemix.net/"}},{}],2:[function(e,t,o){var r=e("../env-config.json");!function(e){"use strict";function t(e,t,r,n){var a=6371e3,i=o(r-e),l=o(n-t),c=Math.sin(i/2)*Math.sin(i/2)+Math.cos(o(e))*Math.cos(o(r))*Math.sin(l/2)*Math.sin(l/2),s=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),u=Math.round(a*s*100)/100;return u}function o(e){return e*(Math.PI/180)}var n,a,i=e.querySelector("#app"),l=0,c=0;i.displayInstalledToast=function(){e.querySelector("platinum-sw-cache").disabled||e.querySelector("#caching-complete").show()},i.addEventListener("dom-change",function(){console.log("Our app is ready to rock!"),e.querySelector("get-username").addEventListener("kick",function(o){console.log("App user is "+o.detail.q),a=o.detail.q,n=new WebSocket(r.location+"wsLocationResource"),n.onopen=function(e){console.log("Socket Open: "+JSON.stringify(e))},n.onmessage=function(e){console.log("Server says: "+JSON.stringify(e))},e.querySelector("my-map").addEventListener("locupdate",function(e){if(console.log("Location changed: lat: "+e.detail.lat+" lon: "+e.detail.lon),null!==a){var t={_id:a,longitude:e.detail.lat,latitude:e.detail.lon};console.log("Sending location update over socket: "+JSON.stringify(t)),n.send(JSON.stringify(t))}}),navigator.geolocation.getCurrentPosition(function(t){var o=t.coords.latitude,r=t.coords.longitude;console.log("geting single position to center map once: "+o+" , "+r),e.querySelector("#g-map").latitude=o,e.querySelector("#g-map").longitude=r,e.querySelector("#g-mark").latitude=o,e.querySelector("#g-mark").longitude=r,e.querySelector("#markitlat").innerHTML=o,e.querySelector("#markitlon").innerHTML=r});var i={enableHighAccuracy:!0,timeout:6e4,maximumAge:1e4};navigator.geolocation.watchPosition(function(o){if(!e.querySelector("#onlyupdateonpress").active){var i=o.coords.longitude,s=o.coords.latitude,u=t(s,i,c,l);if(console.log("distance "+u),l=o.coords.longitude,c=o.coords.latitude,console.log("app.js watchpos: "+s+","+i),e.querySelector("#latdiv").innerHTML=s,e.querySelector("#londiv").innerHTML=i,e.querySelector("#distdiv").innerHTML=u,e.querySelector("#g-map").latitude=s,e.querySelector("#g-map").longitude=i,e.querySelector("#g-mark").latitude=s,e.querySelector("#g-mark").longitude=i,e.querySelector("#markitlat").innerHTML=s,e.querySelector("#markitlon").innerHTML=i,null!==a){console.log(a);var g={_id:a,longitude:i,latitude:s};try{console.log("Trying to send through socket: "+JSON.stringify(g)),n.send(JSON.stringify(g))}catch(d){console.log("Failed because: "+d.message),n=new WebSocket(r.location+"wsLocationResource"),n.onopen=function(e){console.log("Socket Open")},n.onmessage=function(e){console.log("Server says: "+JSON.stringify(e))},n.send(JSON.stringify(g))}e.getElementById("taggable").generateRequest()}}},function(e){console.log("Error getting location: "+e.code+" "+e.message),console.log("Error getting location")},i)})}),window.addEventListener("WebComponentsReady",function(){console.log("webcomponents ready"),i.route="splash",e.querySelector("#paperDrawerPanel").closeDrawer(),e.querySelector("#meta-config").setAttribute("value",JSON.stringify(r));var t=e.querySelector("#meta-config").getAttribute("value");e.querySelector("get-username").url=JSON.parse(t).register+"api/register/",e.querySelector("get-taggable").url=JSON.parse(t).game,e.querySelector("get-taggable").tagUrl=JSON.parse(t).tag+"api/tag/",e.querySelector("get-tagged").url=JSON.parse(t).tag,e.querySelector("mark-it").url=JSON.parse(t).register+"api/markit/newmark/",e.querySelector("my-places").url=JSON.parse(t).register+"api/markit/marked/",e.querySelector("bt-search").url=JSON.parse(t).search+"SearchWS/",e.querySelector("ws-element").open()}),addEventListener("paper-header-transform",function(t){var o=e.querySelector("#mainToolbar .app-name"),r=e.querySelector("#mainToolbar .middle-container"),n=(e.querySelector("#mainToolbar .bottom-container"),t.detail),a=n.height-n.condensedHeight,i=Math.min(1,n.y/a),l=.5,c=Math.max(l,(a-n.y)/(a/(1-l))+l);Polymer.Base.transform("translate3d(0,"+100*i+"%,0)",r),Polymer.Base.transform("scale("+c+") translateZ(0)",o)}),i.onDataRouteClick=function(){var t=e.querySelector("#paperDrawerPanel");t.narrow&&t.closeDrawer()},i.singleUpdateLocation=function(){e.querySelector("#onlyupdateonpress").active?(console.log("Single location update"),navigator.geolocation.getCurrentPosition(function(t){var o=t.coords.latitude,i=t.coords.longitude;if(console.log("geting single position to center map once: "+o+" , "+i),e.querySelector("#g-map").latitude=o,e.querySelector("#g-map").longitude=i,e.querySelector("#g-mark").latitude=o,e.querySelector("#g-mark").longitude=i,e.querySelector("#markitlat").innerHTML=o,e.querySelector("#markitlon").innerHTML=i,null!=a){console.log(a);var l={_id:a,longitude:o,latitude:i};try{console.log("Trying to send through socket: "+JSON.stringify(l)),n.send(JSON.stringify(l))}catch(c){console.log("Failed because: "+c.message),n=new WebSocket(r.location+"wsLocationResource"),n.onopen=function(e){console.log("Socket Open")},n.onmessage=function(e){console.log("Server says: "+JSON.stringify(e))},n.send(JSON.stringify(l))}e.getElementById("taggable").generateRequest()}})):(console.log("Pause automatic updates in settings menu to use this"),e.querySelector("#refreshtooltip").playAnimation())},i.scrollPageToTop=function(){e.getElementById("mainContainer").scrollTop=0}}(document)},{"../env-config.json":1}]},{},[2]);